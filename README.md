War3VK（Warcraft III 画面增强插件）

War3VK 是一个面向玩家的图形增强插件：它在《魔兽争霸III》（经典客户端）中接管 Direct3D 9 渲染路径，并使用 Vulkan 后端与自研画面管线，为游戏加入更现代的阴影与后处理效果。

本项目的目标是“更好看”，而不是“更快”。开启高画质效果后，显卡负载通常会更高，帧率不保证提升。

1. 这是什么？能带来什么变化？

将游戏的 D3D9 渲染转换为 Vulkan 后端（减少对旧式 D3D9 驱动路径的依赖）

提供可在游戏内调节的画质面板：阴影质量、抗锯齿、Bloom、曝光等

不改动玩法，不修改地图数据；主要作用在画面呈现与渲染效果

会在游戏内显示“本项目免费获取”的提示信息，用于防盗卖提醒

2. 使用前准备

系统与驱动

推荐 Windows 10/11

显卡驱动需支持 Vulkan（请更新到官方最新驱动）

游戏版本

主要面向 Warcraft III 1.27a（其他版本可能因 Game.dll 差异而不兼容）

兼容性注意

游戏目录里如果已经存在其他第三方的 d3d9.dll（例如其他画面补丁/注入器/封装器），需要先移走或二选一，否则会冲突。

3. 安装（快速开始）

备份

建议先备份一份游戏根目录（至少备份原有的 d3d9.dll、相关插件文件夹）。

复制文件

将发行包内的文件复制到游戏根目录（通常是 war3.exe 所在文件夹）。

常见需要放在根目录的文件包括：

d3d9.dll（核心插件）

shaderpacks/（可选：用于后处理 ShaderPack）

其他随发行包提供的依赖文件（如有）

启动验证

启动游戏后，根目录应生成日志文件：d3d9.log

若能进入游戏且日志正常生成，说明插件已被加载。

4. 游戏内设置与快捷键

打开/隐藏画质面板：

Ctrl + F1

在“War3VK 画质设置”面板中，你可以进行这些常用操作：

突破帧率上限：解除帧率锁定（不等于帧率一定更高；只是允许超过刷新率）

启用后处理：总开关（Bloom / 抗锯齿等依赖它）

启用阴影：总开关

阴影质量：低 / 中 / 高 / 极致

阴影强度：阴影深浅

抗锯齿类型：关闭 / FXAA / SMAA（多档）

启用 Bloom：泛光效果

曝光：整体亮度/曝光调整

提示：

如果你只想先体验“更稳定”的画面增强，建议先开启“后处理 + SMAA”，阴影从“中”开始尝试。

若出现卡顿或发热明显，优先降低“阴影质量”，再考虑关闭 Bloom。

5. ShaderPack（可选，高级玩法）

War3VK 支持从文件夹加载后处理 ShaderPack（用于色调映射、额外后处理、实验效果等）。

默认示例路径（相对游戏目录）：shaderpacks/vulkan_pack_template

你可以在面板中填写路径并点击“加载”，也可以使用“热重载”更新修改后的 shader。

注意：

ShaderPack 属于高级功能，错误的 shader 或不兼容的配置可能导致画面异常甚至崩溃。

出现问题时，先关闭后处理或移除 shaderpacks/ 文件夹进行排查。

6. 卸载

卸载很简单：

删除（或移走）游戏根目录中的 d3d9.dll

同时可删除 d3d9.log、shaderpacks/（如果你不再需要）

恢复到原版渲染后，游戏将不再加载 War3VK。

7. 常见问题（FAQ）

启动黑屏/闪退

多数与驱动/Vulkan 环境或与其他 d3d9.dll 冲突有关。

尝试更新显卡驱动；确认目录内没有其他同名 DLL；查看 d3d9.log 末尾错误信息。

进入游戏后很卡

本项目以画面为主，不是性能优化插件。

建议先：降低阴影质量、关闭 Bloom、降低抗锯齿档位。

个别地图/模型效果异常（闪烁、阴影抖动等）

这类问题通常与地图的特殊渲染路径或极端镜头角度有关。

先尝试关闭阴影或后处理；再把 d3d9.log 提供给项目维护者定位。

平台/对战环境拦截第三方 DLL

某些启动器/平台可能对注入类 DLL 较敏感。

建议在你确认允许的环境中使用；如平台有明确限制，请遵守平台规则。

8. 技术概览（给想了解原理的玩家）

渲染后端：基于 DXVK 的 D3D9→Vulkan 路径

游戏侧接入：通过 Hook 追踪并接管部分 War3 渲染阶段与状态流

阴影系统：级联阴影（CSM）+ PCF/Poisson 采样等滤波策略

后处理：FXAA / SMAA、Bloom、曝光控制等

UI：内置 ImGui 画质面板，支持在游戏内实时调参

日志：默认输出 d3d9.log 便于排错

9. 免责声明

War3VK 为非官方第三方插件，可能存在兼容性问题或未知风险。

使用前请备份游戏目录与存档；由此产生的任何问题需自行承担。

10. 致谢

DXVK

Dear ImGui

MinHook
